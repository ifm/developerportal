<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Instantiation &mdash; O3R  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=28a392ea" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=d9f55abb"></script>
        <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Configuration" href="../Configuration/configuration.html" />
    <link rel="prev" title="Camera mounting for ODS" href="../Mounting/mounting.html" />
    <!-- Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZZ08KXKV1G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZZ08KXKV1G');
    </script> -->
     

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            O3R
          </a>
              <div class="version">
                v1.4.30
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted/index_getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Firmware/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CompatibilityMatrix/compatibility_matrix.html">Compatibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Technology/index_technology.html">Technology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_software_interfaces.html">Software Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CalibrationRoutines/index_calibrations.html">Calibration Routines</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index_ods.html">ODS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Mounting/mounting.html">Mounting</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Instantiation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extrinsic-calibration">Extrinsic calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ports-selection">Ports selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visual-odometry">Visual odometry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Configuration/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Zones/zones.html">Zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OccupancyGrid/occupancy_grid.html">Occupancy grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Recording/ods_data_recording.html">Recording</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ChangingViews/changing_views.html">Changing views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OverhangingLoads/overhanging_loads.html">Overhanging loads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NegativeObstacles/negative_obstacles.html">Negative Obstacles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DustMitigation/dust_mitigation.html">Dust artifact mitigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ExtrinsicCalibration/index_extrinsic_calibration.html">Extrinsic calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Performance/index_performance.html">Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DeviceVerification/index_device_verification.html">Device verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iVA/index_ifmODS_iVA.html">ifmVisionAssistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Python/index_ifmODS_python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Cpp/index_ifmODS_cpp.html">C++</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../downloadable/index.html">History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">O3R</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index_ods.html">ODS (Obstacle Detection System)</a></li>
      <li class="breadcrumb-item active">Instantiation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ODS/Instantiation/instantiation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="instantiation">
<h1>Instantiation<a class="headerlink" href="#instantiation" title="Link to this heading"></a></h1>
<section id="extrinsic-calibration">
<h2>Extrinsic calibration<a class="headerlink" href="#extrinsic-calibration" title="Link to this heading"></a></h2>
<p>If no extrinsic calibration is provided, for example the extrinsic calibration parameters are set to their default values, the ODS application will not work!
This would mean the camera head is inside the floor (<code class="docutils literal notranslate"><span class="pre">transZ</span> <span class="pre">==</span> <span class="pre">0</span></code>) and looking towards to ceiling, which is not a valid ODS extrinsic calibration use case.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Always forward all 6 extrinsic calibration values at the same time. You can edit the full configuration in a file and provide this file to the <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> command.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">&lt;por</span><span class="kc">t</span><span class="err">_</span><span class="kc">nu</span><span class="err">mber&gt;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;processing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;extrinsicHeadToUser&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;rotX&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;ro</span><span class="kc">t</span><span class="err">X_value&gt;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;rotY&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;ro</span><span class="kc">t</span><span class="err">Y_value&gt;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;rotZ&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;ro</span><span class="kc">t</span><span class="err">Z_value&gt;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transX&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;</span><span class="kc">trans</span><span class="err">X_value&gt;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transY&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;</span><span class="kc">trans</span><span class="err">Y_value&gt;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transZ&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;</span><span class="kc">trans</span><span class="err">Z_value&gt;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The rotation is in rad (radians) - instead of 90°, you provide Pi/2</p>
</div>
<p>For one camera, connected to port 2, facing forward (+x) with label up (+z) and shifted 20 cm vertically, the calibration can be set with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ifm3dpy.device</span> <span class="kn">import</span> <span class="n">O3R</span>
<span class="n">o3r</span> <span class="o">=</span> <span class="n">O3R</span><span class="p">()</span>
<span class="n">ext_calib</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="s2">&quot;ports&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;port2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;processing&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;extrinsicHeadToUser&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;rotX&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.57</span><span class="p">,</span>
                    <span class="s2">&quot;rotY&quot;</span><span class="p">:</span> <span class="mf">1.57</span><span class="p">,</span>
                    <span class="s2">&quot;rotZ&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                    <span class="s2">&quot;transX&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                    <span class="s2">&quot;transY&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                    <span class="s2">&quot;transZ&quot;</span><span class="p">:</span> <span class="mf">0.2</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">o3r</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ext_calib</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the viewer of your choice, for example the ifmVisionAssistant, you can see the difference before and after the calibration.</p>
</section>
<section id="ports-selection">
<h2>Ports selection<a class="headerlink" href="#ports-selection" title="Link to this heading"></a></h2>
<p>A VPU (OVP800) can connect up to 6 3D imager, ranging from <code class="docutils literal notranslate"><span class="pre">Port</span> <span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">Port</span> <span class="pre">5</span></code>. Providing the port information to the ODS configuration tells the system which heads should be used for the ODS application itself.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The current ODS version do not support more than 3 used heads within an ODS application.
</pre></div>
</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;ports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;port2&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;port3&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;port6&quot;</span>
<span class="w">          </span><span class="p">],</span>
</pre></div>
</div>
<p>Connected heads, which are not defined within the ODS JSON can be used in parallel to the ODS application.
<code class="docutils literal notranslate"><span class="pre">port6</span></code> is the <code class="docutils literal notranslate"><span class="pre">IMU</span></code> (Inertial Measurement Unit) and is used by ODS. <strong><code class="docutils literal notranslate"><span class="pre">port6</span></code> <em>must always</em> be provided to an ODS application.</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We recommend turning all the unused camera heads to “CONF” mode, to avoid them using up system resources. This is especially true for unused RGB cameras.</p>
</div>
</section>
<section id="visual-odometry">
<h2>Visual odometry<a class="headerlink" href="#visual-odometry" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">vo</span></code> - Visual odometry - is an algorithmic approach to provide - together with the IMU - ego motion data to the ODS algorithm. Images from one head are used together with the IMU data to continuously improve the ODS ego-motion estimation. The best performance is achieved by using a head with (the most) floor data visible in its images. The floors distance range needs to be at least between 1.00m and 1.50m.</p>
<p>Provide the port number (head with floor data in the images) to the <code class="docutils literal notranslate"><span class="pre">vo</span></code> attribute.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;vo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;voPorts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;port2&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          
<html>
<head>
 
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="footer, address, phone, icons" />
 
	<title>Footer With Address And Phones</title>
	
	
 
</head>
 
	<body>
		
		<footer class="footer-distributed">
 
		<div class="footer-left">
 
		<p class="footer-links">
		<a href="index.html">Home</a>
	·
		<a href="http://www.o3r.ifm" target="_blank">Learn more</a>
	·
		<a href="/latest/_static/privacy-policy.html" target="_blank">Privacy Policy</a>

		</p>
 
		<p class="footer-company-name">ifm robotics &copy; 2023</p>
		</div>
		
		<div class="footer-center">
 
		<div>
		<i class="fa fa-envelope"></i>
		<p><a href="mailto:support.efector.object-ident@ifm.com">support.efector.object-ident@ifm.com</a></p>
		</div>
 
		</div>
 
		<div class="footer-right">
 
		<div class="footer-icons">
 
		<a href="https://www.facebook.com/ifmefector" target="_blank"><i class="fa fa-facebook"></i></a>
		<a href="https://twitter.com/ifm_USA" target="_blank"><i class="fa fa-twitter"></i></a>
		<a href="https://www.linkedin.com/showcase/ifm-efector" target="_blank"><i class="fa fa-linkedin"></i></a>
		<a href="https://github.com/ifm" target="_blank"><i class="fa fa-github"></i></a>
 
		</div>
 
		</div>
 
		</footer>
 
	</body>
 
</html>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>