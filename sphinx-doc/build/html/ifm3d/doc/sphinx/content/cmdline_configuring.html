<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Camera and Imager Configuration &mdash; O3R  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> O3R
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../documentation/O3R/README.html">O3R</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_instructions.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli_link.html">Command Line tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp_api/annotated.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Indices and tables</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">O3R</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Camera and Imager Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/ifm3d/doc/sphinx/content/cmdline_configuring.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="camera-and-imager-configuration">
<h1>Camera and Imager Configuration<a class="headerlink" href="#camera-and-imager-configuration" title="Permalink to this headline"></a></h1>
<p>Configuring the parameters of an ifm 3D camera is accomplished in ifm3d in one
of two ways: 1) via the <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code> command line tool; 2) via the <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code>
library’s <code class="docutils literal notranslate"><span class="pre">camera</span></code> module API. We show below how to do so with the command line tool.
Please refer to the <span class="xref std std-doc">../examples/o3r/index</span> for instructions on configuring the camera through <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code> library.</p>
<p>The primary mechanism for using the <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code> command line tool to configure an
ifm 3D camera is to utilize the <code class="docutils literal notranslate"><span class="pre">dump</span></code> and <code class="docutils literal notranslate"><span class="pre">config</span></code> subcommands to <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code>. The
<code class="docutils literal notranslate"><span class="pre">dump</span></code> command serializes the camera state to JSON and prints it to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>,
while the <code class="docutils literal notranslate"><span class="pre">config</span></code> subcommand consumes (either from a file or <code class="docutils literal notranslate"><span class="pre">stdin</span></code>) the same
JSON serialization but interprets that JSON as a desired state for the
camera. Said another way, <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> will make a best effort attempt to
have the actual camera hardware reflect the camera state encoded in the JSON
stream passed to it.</p>
<p>The remainder of this document will contain a set of examples and associated
narrative in hopes of demonstrating how to leverage <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code> to configure your
3D camera. For purposes of this document, an ifm O3D303 will be
utilized. However, the techniques shown here apply to any supported <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code>
camera (e.g., O3X). Additionally, since the camera state is serialized via
JSON, some of the examples below will utilize the
<a class="reference external" href="https://stedolan.github.io/jq/">jq</a> command line JSON processor to build up
Linux pipelines to carry out a specific task. The usage of <code class="docutils literal notranslate"><span class="pre">jq</span></code> is <em>not</em>
required. Standard Linux tools (<code class="docutils literal notranslate"><span class="pre">grep</span></code>, <code class="docutils literal notranslate"><span class="pre">sed</span></code>, <code class="docutils literal notranslate"><span class="pre">awk</span></code>, <code class="docutils literal notranslate"><span class="pre">perl</span></code>, <code class="docutils literal notranslate"><span class="pre">python</span></code>, etc.)
could also be used or a single pipeline can be decomposed into multiple
commands whereby data are serialized to a file, edited, then I/O redirected
into <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> in discrete steps. Again, the remainder of this document
will assume <code class="docutils literal notranslate"><span class="pre">jq</span></code> is available. (To install <code class="docutils literal notranslate"><span class="pre">jq</span></code> on Ubuntu:
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">jq</span></code>).</p>
<section id="dump">
<h2>Dump<a class="headerlink" href="#dump" title="Permalink to this headline"></a></h2>
<p>Serializing the current state of the camera is accomplished through the <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">dump</span></code> command. Exemplary output is shown below:</p>
<p>In the example above, we serialize the entire state of the camera. This is
useful to, for example, save to a file, edit, and push out to one or more
cameras. However, sometimes we need to look at the camera configuration to
simply answer a question we may have. For example, if we wanted to see which
version of the firmware the camera is running we could issue the following
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq .ifm3d._.SWVersion.IFM_Software
&quot;1.20.1138&quot;
</pre></div>
</div>
<p>It follows that the entire JSON serialized configuration may be further
processed either programmatically or manually via a text editor.</p>
</section>
<section id="config">
<h2>Config<a class="headerlink" href="#config" title="Permalink to this headline"></a></h2>
<p>Mutating parameters on the camera is done by creating a <em>desired</em> camera state
encoded in JSON compliant to the output produced by <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">dump</span></code>. For example,
if we wanted to change the framerate of the <em>first</em> application on the camera
we could do the following.</p>
<ol class="simple">
<li><p>Before changing the framerate, let’s see what it is currently set to:</p></li>
</ol>
<p>(NOTE: This step is not necessary. We do this to illustrate the state of the
camera prior to mutating the parameter).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq .ifm3d.Apps[0].Imager.FrameRate
&quot;5&quot;
</pre></div>
</div>
<p>We see the current framerate is 5 fps.</p>
<ol class="simple">
<li><p>Let’s set it to 10 fps:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq &#39;.ifm3d.Apps[0].Imager.FrameRate=&quot;10&quot;&#39; | ifm3d config
</pre></div>
</div>
<ol class="simple">
<li><p>Let’s check to make sure that our configuration has persisted.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq .ifm3d.Apps[0].Imager.FrameRate
&quot;10&quot;
</pre></div>
</div>
<p>Let’s now break down what we did in this single Linux pipeline.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq &#39;.ifm3d.Apps[0].Imager.FrameRate=&quot;10&quot;&#39; | ifm3d config
</pre></div>
</div>
<p>First we dump the entire state of the camera to JSON, process the JSON in-line
via <code class="docutils literal notranslate"><span class="pre">jq</span></code> to set the FrameRate to 10 fps, then pipe the resulting output to
<code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> which accepts the new (mutated) JSON stream on <code class="docutils literal notranslate"><span class="pre">stdin</span></code> and
carries out the necessary network calls to mutate the camera settings and
persist them.</p>
<p>This is the basic paradigm that can be followed to tune just about any
parameter on the camera. To carry out more complex configuration tasks (e.g.,
changing several parameters at once), the dump can be saved to a file, edited
via a text editor, then fed into <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> to perform the
configuration. It is also important to point out that <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> does not
need the entire ifm3d JSON <em>object</em> to operate correctly. <em>Snippets</em> are
valid. For example, if we wanted to set the framerate back to <code class="docutils literal notranslate"><span class="pre">5</span></code>, we could do
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo &#39;{&quot;Apps&quot;:[{&quot;Index&quot;:&quot;1&quot;,&quot;Imager&quot;:{&quot;FrameRate&quot;:&quot;5&quot;}}]}&#39; | ifm3d config
</pre></div>
</div>
<p>Let’s validate that it worked:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq .ifm3d.Apps[0].Imager.FrameRate
&quot;5&quot;
</pre></div>
</div>
<p>In summary, the primary concept in configuring your camera via <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code> is that
the <code class="docutils literal notranslate"><span class="pre">dump</span></code> subcommand can be used to access the current camera state while the
<code class="docutils literal notranslate"><span class="pre">config</span></code> subcommand is used to declare and mutate the camera into a desired
state – assuming the desired state is valid.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, ifm CSR.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>