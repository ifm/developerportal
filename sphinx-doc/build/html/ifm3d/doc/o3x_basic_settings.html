<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ifm3d - Inspecting and configuring the O3X camera/imager settings &mdash; O3R  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> O3R
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation/O3R/README.html">O3R</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx/content/installation_instructions.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx/cli_link.html">Command Line tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx/python_api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx/cpp_api/annotated.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx/index.html">Indices and tables</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">O3R</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>ifm3d - Inspecting and configuring the O3X camera/imager settings</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ifm3d/doc/o3x_basic_settings.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="ifm3d-inspecting-and-configuring-the-o3x-camera-imager-settings">
<h1>ifm3d - Inspecting and configuring the O3X camera/imager settings<a class="headerlink" href="#ifm3d-inspecting-and-configuring-the-o3x-camera-imager-settings" title="Permalink to this headline"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ifm3d</span></code> provides access to the camera/imager parameters via the <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">dump</span></code> and
<code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> command line programs. The approach employed by <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code>
is to encode the settings via a JSON serialization. To inpsect the settings you
use <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">dump</span></code> to get a JSON encoding of the parameters. To mutate the
settings you use <code class="docutils literal notranslate"><span class="pre">ifm3d</span> <span class="pre">config</span></code> by providing a JSON serialization of your
<em>desired</em> settings. Examples on how to use these services now follows.</p>
<p>Lets first consider an O3X in a factory default state. In the code block below,
we first factory-default our camera, then dump its settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ ifm3d reset

    $ ifm3d dump
{
  &quot;ifm3d&quot;: {
    &quot;Apps&quot;: [
      {
        &quot;Description&quot;: &quot;&quot;,
        &quot;Id&quot;: &quot;1034160761&quot;,
        &quot;Imager&quot;: {
          &quot;ExposureTime&quot;: &quot;1000&quot;,
          &quot;FrameRate&quot;: &quot;5&quot;,
          &quot;MaxAllowedFrameRate&quot;: &quot;12.5&quot;,
          &quot;MinimumAmplitude&quot;: &quot;42&quot;,
          &quot;SpatialFilter&quot;: {
            &quot;MaskSize&quot;: &quot;0&quot;
          },
          &quot;SpatialFilterType&quot;: &quot;1&quot;,
          &quot;SymmetryThreshold&quot;: &quot;0.4&quot;,
          &quot;TemporalFilter&quot;: {},
          &quot;TemporalFilterType&quot;: &quot;0&quot;,
          &quot;Type&quot;: &quot;UR03.10m_1FRQ_1EXP_0GRAY&quot;
        },
        &quot;Index&quot;: &quot;1&quot;,
        &quot;Name&quot;: &quot;&quot;,
        &quot;OutputAmplitudeImage&quot;: &quot;true&quot;,
        &quot;OutputConfidenceImage&quot;: &quot;false&quot;,
        &quot;OutputDistanceImage&quot;: &quot;true&quot;,
        &quot;OutputGrayscaleImage&quot;: &quot;false&quot;,
        &quot;OutputXYZImage&quot;: &quot;false&quot;,
        &quot;TriggerMode&quot;: &quot;1&quot;,
        &quot;Type&quot;: &quot;Camera&quot;
      }
    ],
    &quot;Device&quot;: {
      &quot;ArticleNumber&quot;: &quot;M03457&quot;,
      &quot;ArticleStatus&quot;: &quot;AA&quot;,
      &quot;Description&quot;: &quot;&quot;,
      &quot;DeviceType&quot;: &quot;1:512&quot;,
      &quot;IPAddressConfig&quot;: &quot;0&quot;,
      &quot;ImageTimestampReference&quot;: &quot;1495614156&quot;,
      &quot;Name&quot;: &quot;New sensor&quot;,
      &quot;OperatingMode&quot;: &quot;0&quot;,
      &quot;PasswordActivated&quot;: &quot;false&quot;,
      &quot;SessionTimeout&quot;: &quot;30&quot;,
      &quot;UpTime&quot;: &quot;0.136944444444444&quot;
    },
    &quot;Net&quot;: {
      &quot;MACAddress&quot;: &quot;00:02:01:40:54:09&quot;,
      &quot;NetworkSpeed&quot;: &quot;0&quot;,
      &quot;StaticIPv4Address&quot;: &quot;192.168.0.69&quot;,
      &quot;StaticIPv4Gateway&quot;: &quot;192.168.0.201&quot;,
      &quot;StaticIPv4SubNetMask&quot;: &quot;255.255.255.0&quot;,
      &quot;UseDHCP&quot;: &quot;false&quot;
    },
    &quot;Time&quot;: {
      &quot;CurrentTime&quot;: &quot;1495614156&quot;,
      &quot;NTPServers&quot;: &quot;&quot;,
      &quot;StartingSynchronization&quot;: &quot;false&quot;,
      &quot;Stats&quot;: &quot;&quot;,
      &quot;SynchronizationActivated&quot;: &quot;false&quot;,
      &quot;Syncing&quot;: &quot;false&quot;,
      &quot;WaitSyncTries&quot;: &quot;1&quot;
    },
    &quot;_&quot;: {
      &quot;Date&quot;: &quot;Thu Sep 14 08:54:32 2017&quot;,
      &quot;HWInfo&quot;: {
        &quot;MACAddress&quot;: &quot;00:02:01:40:54:09&quot;,
        &quot;Mainboard&quot;: &quot;#!03_M100_B01_12345678_008025483&quot;,
        &quot;MiraSerial&quot;: &quot;Not implemented&quot;
      },
      &quot;SWVersion&quot;: {
        &quot;Algorithm_Version&quot;: &quot;0.1.5&quot;,
        &quot;Calibration_Device&quot;: &quot;ff:ff:ff:ff:ff:ff&quot;,
        &quot;Calibration_Version&quot;: &quot;99.99.99&quot;,
        &quot;ELDK&quot;: &quot;GOLDENEYE_YOCTO_HARDFP-303-06d9c894636352a6c93711c7284d02b0c794a527&quot;,
        &quot;IFM_Software&quot;: &quot;0.1.20&quot;,
        &quot;Linux&quot;: &quot;Linux version 3.14.34-rt31-yocto-standard-00016-g5121435-dirty (jenkins@dettlx152) (gcc version 4.9.2 (GCC) ) #1 SMP PREEMPT RT Tue Mar 14 08:40:14 CET 2017&quot;,
        &quot;Main_Application&quot;: &quot;0.4.1122&quot;
      },
      &quot;ifm3d_version&quot;: 302
    }
  }
}
</pre></div>
</div>
<p>Let’s say that we now wanted to change the imager to employ two frequencies (to
extend our range) and two exposure times (to increase the fidelity of our depth
data). The first thing we need to do is understand the special strings used to
spell out the imager name. To get a list of available imager types we can use
the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ ifm3d imager-types
[
  &quot;UR03.10m_1FRQ_1EXP_0GRAY&quot;,
  &quot;UR03.10m_1FRQ_2EXP_0GRAY&quot;,
  &quot;UR15.50m_FRAC8,7_2FRQ_1EXP_0GRAY&quot;,
  &quot;UR15.50m_FRAC8,7_2FRQ_2EXP_0GRAY&quot;
]
</pre></div>
</div>
<p>We see the last one includes the strings <code class="docutils literal notranslate"><span class="pre">2FRQ</span></code> and <code class="docutils literal notranslate"><span class="pre">2EXP</span></code>, this is what we
want. To set that on the camera, we can use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ echo &#39;{&quot;Apps&quot;:[{&quot;Index&quot;:&quot;1&quot;,&quot;Imager&quot;:{&quot;Type&quot;:&quot;UR15.50m_FRAC8,7_2FRQ_2EXP_0GRAY&quot;}}]}&#39; | ifm3d config
</pre></div>
</div>
<p>We can now check that our settings have been applied with the following command
(this assumes you have the json <em>grepping</em> tool <code class="docutils literal notranslate"><span class="pre">jq</span></code> installed. If you do not,
you can simply inspect the whole dump):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ ifm3d dump | jq .ifm3d.Apps[0].Imager.Type
&quot;UR15.50m_FRAC8,7_2FRQ_2EXP_0GRAY&quot;
</pre></div>
</div>
<p>Now, let’s look again at our factory defaulted imager settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq .ifm3d.Apps[0].Imager
{
  &quot;ExposureTime&quot;: &quot;1000&quot;,
  &quot;ExposureTimeRatio&quot;: &quot;40&quot;,
  &quot;FrameRate&quot;: &quot;5&quot;,
  &quot;MaxAllowedFrameRate&quot;: &quot;6.09756097560976&quot;,
  &quot;MinimumAmplitude&quot;: &quot;42&quot;,
  &quot;SpatialFilter&quot;: {
    &quot;MaskSize&quot;: &quot;0&quot;
  },
  &quot;SpatialFilterType&quot;: &quot;1&quot;,
  &quot;SymmetryThreshold&quot;: &quot;0.4&quot;,
  &quot;TemporalFilter&quot;: {},
  &quot;TemporalFilterType&quot;: &quot;0&quot;,
  &quot;Type&quot;: &quot;UR15.50m_FRAC8,7_2FRQ_2EXP_0GRAY&quot;
}
</pre></div>
</div>
<p>We can see that there is (by default) a spatial filter applied
(<code class="docutils literal notranslate"><span class="pre">SpatialFilterType</span></code>) and it has a mask parameter (<code class="docutils literal notranslate"><span class="pre">MaskSize</span></code>). This happens to
be a spatial median filter with a 3x3 mask. These special codes are defined in
the <a class="reference external" href="https://github.com/ifm/ifm3d/blob/master/modules/camera/include/ifm3d/camera/camera.h">camera.h</a>
header file. So, assuming you have consulted that file where the constants are
defined, we could set our median filter to a 5x5 mask with the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ echo &#39;{&quot;Apps&quot;:[{&quot;Index&quot;:&quot;1&quot;,&quot;Imager&quot;:{&quot;SpatialFilter&quot;:{&quot;MaskSize&quot;:&quot;1&quot;}}}]}&#39; | ifm3d config
</pre></div>
</div>
<p>And we can check that the settings were accepted by the camera:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ifm3d dump | jq .ifm3d.Apps[0].Imager
{
  &quot;ExposureTime&quot;: &quot;1000&quot;,
  &quot;ExposureTimeRatio&quot;: &quot;40&quot;,
  &quot;FrameRate&quot;: &quot;5&quot;,
  &quot;MaxAllowedFrameRate&quot;: &quot;6.09756097560976&quot;,
  &quot;MinimumAmplitude&quot;: &quot;42&quot;,
  &quot;SpatialFilter&quot;: {
    &quot;MaskSize&quot;: &quot;1&quot;
  },
  &quot;SpatialFilterType&quot;: &quot;1&quot;,
  &quot;SymmetryThreshold&quot;: &quot;0.4&quot;,
  &quot;TemporalFilter&quot;: {},
  &quot;TemporalFilterType&quot;: &quot;0&quot;,
  &quot;Type&quot;: &quot;UR15.50m_FRAC8,7_2FRQ_2EXP_0GRAY&quot;
}
</pre></div>
</div>
<p>From the above description, it would follow that to turn off spatial filtering,
you could use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ echo &#39;{&quot;Apps&quot;:[{&quot;Index&quot;:&quot;1&quot;,&quot;Imager&quot;:{&quot;SpatialFilterType&quot;:&quot;0&quot;}}]}&#39; | ifm3d config
</pre></div>
</div>
<p>We can validate our settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ ifm3d dump | jq .ifm3d.Apps[0].Imager
{
  &quot;ExposureTime&quot;: &quot;1000&quot;,
  &quot;ExposureTimeRatio&quot;: &quot;40&quot;,
  &quot;FrameRate&quot;: &quot;5&quot;,
  &quot;MaxAllowedFrameRate&quot;: &quot;6.09756097560976&quot;,
  &quot;MinimumAmplitude&quot;: &quot;42&quot;,
  &quot;SpatialFilter&quot;: {},
  &quot;SpatialFilterType&quot;: &quot;0&quot;,
  &quot;SymmetryThreshold&quot;: &quot;0.4&quot;,
  &quot;TemporalFilter&quot;: {},
  &quot;TemporalFilterType&quot;: &quot;0&quot;,
  &quot;Type&quot;: &quot;UR15.50m_FRAC8,7_2FRQ_2EXP_0GRAY&quot;
}
</pre></div>
</div>
<p>While full documentation on all imager parameters are forthcoming, this
document should serve as a quick-start reference to access and mutate camera
parameters from the command-line using the <code class="docutils literal notranslate"><span class="pre">ifm3d</span></code> tool.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, ifm CSR.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>