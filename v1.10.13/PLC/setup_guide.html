<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ODS PLC App setup Guide &mdash; O3R  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=5800d392" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=d9f55abb"></script>
        <script src="../_static/js/versionwarning.js?v=d4224a34"></script>
        <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <!-- Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZZ08KXKV1G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZZ08KXKV1G');
    </script> -->
     

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            O3R
          </a>
              <div class="version">
                v1.10.13
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted/index_getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Firmware/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CompatibilityMatrix/compatibility_matrix.html">Compatibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Technology/index_technology.html">Technology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index_software_interfaces.html">Software Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CalibrationRoutines/index_calibrations.html">Calibration Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ODS/index_ods.html">ODS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PDS/index_pds.html">PDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ/FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloadable/index.html">History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">O3R</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ODS PLC App setup Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/PLC/setup_guide.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ods-plc-app-setup-guide">
<h1>ODS PLC App setup Guide<a class="headerlink" href="#ods-plc-app-setup-guide" title="Link to this heading"></a></h1>
<section id="o3r-hardware-and-software-requirements">
<h2>O3R Hardware and Software requirements<a class="headerlink" href="#o3r-hardware-and-software-requirements" title="Link to this heading"></a></h2>
<section id="hardware-requirements">
<h3>Hardware requirements<a class="headerlink" href="#hardware-requirements" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Article</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OVP811</p></td>
<td><p>Latest VPU generation with pre-installed ODS license</p></td>
</tr>
<tr class="row-odd"><td><p>O3R222 (AB/AC/AD)</p></td>
<td><p><li>3D: 38k 224x172, 60°x45°</li> <li>2D: 1280x800, 127°x80°</li></p></td>
</tr>
<tr class="row-even"><td><p>O3R225 (AB/AC/AD)</p></td>
<td><p><li>3D: 38k 224x172, 105°x78°</li><li>2D: 1280x800, 127°x80°</li></p></td>
</tr>
</tbody>
</table>
<p>Use 1 Gigabit/s rated hardware: cables, switches only.</p>
</section>
<section id="software-requirements">
<h3>Software requirements<a class="headerlink" href="#software-requirements" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Software</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Firmware</p></td>
<td><p>1.5.14</p></td>
</tr>
</tbody>
</table>
<!--| ifmVisionAssistant   | 2.9.x (download the latest version from [ifm.com](https://www.ifm.com/de/de/product/OVP811?tab=documents)) | -->
</section>
</section>
<section id="plc-hardware-and-software-requirements">
<h2>PLC Hardware and Software requirements<a class="headerlink" href="#plc-hardware-and-software-requirements" title="Link to this heading"></a></h2>
<section id="plc-hardware-requirements">
<h3>PLC Hardware requirements<a class="headerlink" href="#plc-hardware-requirements" title="Link to this heading"></a></h3>
<p>The current function block is developed only for the following PLC’s.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Article</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SIEMENS S71500</p></td>
<td><p>S7CPU series (cycle time &lt; 20 ms)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="plc-software-requirements">
<h3>PLC Software requirements<a class="headerlink" href="#plc-software-requirements" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Software</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SIEMENS TIA Portal</p></td>
<td><p>&gt;= V16</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="state-machine-overview">
<h2>State Machine overview<a class="headerlink" href="#state-machine-overview" title="Link to this heading"></a></h2>
<p>A state machine serves as an abstraction to accomplish the successful interface between ODS, PLC Applications and PLC.
<img alt="State Machine" src="../_images/state_machine.drawio1.svg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>If there are any diagnostics raised during the configuration / operation state, please review the [diagnostic reaction strategy documentation](../SoftwareInterfaces/ifmDiagnostic/diagnostic_reaction_strategy.md) to resolve the issues.
</pre></div>
</div>
</div>
</section>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<p>Extrinsic calibration of the cameras and VPU is a prerequisite for setting up an ODS application. Please refer to this <a class="reference external" href="https://ifm3d.com/latest/CalibrationRoutines/index_calibrations.html">document</a> for extrinsic calibration routines.</p>
</section>
<section id="setup-procedure">
<h2>Setup procedure<a class="headerlink" href="#setup-procedure" title="Link to this heading"></a></h2>
<p>To setup PLC based AGV with O3R ODS (collision avoidance), follow these steps.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ods-plc-app-setup-guide">ODS PLC App setup Guide</a></p>
<ul>
<li><p><a class="reference internal" href="#o3r-hardware-and-software-requirements">O3R Hardware and Software requirements</a></p>
<ul>
<li><p><a class="reference internal" href="#hardware-requirements">Hardware requirements</a></p></li>
<li><p><a class="reference internal" href="#software-requirements">Software requirements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#plc-hardware-and-software-requirements">PLC Hardware and Software requirements</a></p>
<ul>
<li><p><a class="reference internal" href="#plc-hardware-requirements">PLC Hardware requirements</a></p></li>
<li><p><a class="reference internal" href="#plc-software-requirements">PLC Software requirements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#state-machine-overview">State Machine overview</a></p></li>
<li><p><a class="reference internal" href="#prerequisites">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#setup-procedure">Setup procedure</a></p>
<ul>
<li><p><a class="reference internal" href="#ods-application-setup-creation-and-configuration">ODS application setup: creation and configuration</a></p></li>
<li><p><a class="reference internal" href="#plc-application-setup-creation-and-configuration">PLC application setup: creation and configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#configuration-parameters"><span class="xref myst">Configuration parameters</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#plc-hardware-setup-network-topology">PLC hardware setup: Network Topology</a></p></li>
<li><p><a class="reference internal" href="#siemens-function-block">SIEMENS Function Block</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<section id="ods-application-setup-creation-and-configuration">
<h3>ODS application setup: creation and configuration<a class="headerlink" href="#ods-application-setup-creation-and-configuration" title="Link to this heading"></a></h3>
<p>To create and configure the ODS application instance please refer to the <a class="reference external" href="https://ifm3d.com/latest/ODS/index_ods.html">ODS section</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The PLC function block is only able to configure between already existing presets of the ODS application (via PLC application). Meaning, when a preset index load is requested from the PLC to the PLC application, the PLC application will internally load the given ODS preset. If preset index is not existing, then the system will throw a asynchronous diagnostic: invalid configuration.</p></li>
<li><p>Therefore, the presets of ODS application have to be configured prior to creating the PLC application.</p></li>
</ul>
</div>
<p>To configure the presets of an ODS application, please refer to the <a class="reference internal" href="../ODS/Presets/presets.html"><span class="std std-doc">presets documentation</span></a>.</p>
<p>Example preset configurations for different driving scenarios can be found in <a class="reference internal" href="driving_scenarios.html"><span class="std std-doc">driving scenarios document</span></a></p>
</section>
<section id="plc-application-setup-creation-and-configuration">
<h3>PLC application setup: creation and configuration<a class="headerlink" href="#plc-application-setup-creation-and-configuration" title="Link to this heading"></a></h3>
<p>In ifmVisionAssistant, create the PLC application from the applications in the <code class="docutils literal notranslate"><span class="pre">Application</span></code> window by clicking on the <img alt="add_app" src="../_images/add_app.png" /> icon.</p>
<section id="configuration-parameters">
<h4>Configuration parameters<a class="headerlink" href="#configuration-parameters" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Parameter</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>To configure the custom name for the application</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">state</span></code></p></td>
<td><p>The current application state. Per default, the state is set to <code class="docutils literal notranslate"><span class="pre">RUN</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">configuration/odsApp</span></code></p></td>
<td><p>Identifier of the ODS app instance. (e.g. <code class="docutils literal notranslate"><span class="pre">app0</span></code>)</p></td>
</tr>
</tbody>
</table>
<!--                   | `ports`                                                               | --------- | -->
<p>The PLC application is per default in <code class="docutils literal notranslate"><span class="pre">RUN</span></code> state. Therefore the ODS application shall be saved to be in <code class="docutils literal notranslate"><span class="pre">RUN</span></code> state at every bootup session.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The PLC embedded application sends data over TCP/IP without waiting for acknowledgement. When an additional network load introduced by the user may result in network saturations i.e. communication delays.
</pre></div>
</div>
</div>
</section>
</section>
<section id="plc-hardware-setup-network-topology">
<h3>PLC hardware setup: Network Topology<a class="headerlink" href="#plc-hardware-setup-network-topology" title="Link to this heading"></a></h3>
<p>To estabilish a successful communication between PLC and VPU, both devices must be in same subnet range. Please refer to the <a class="reference external" href="https://ifm3d.com/latest/Technology/VPU/ethernet.html">Ethernet interfaces</a> documentation for setting up the static IP address on VPU.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- Please use only `ETH0` as a main communication interface between VPU and PLC.
- `ETH1` can be used for the debugging purposes via GUI / API.
- Ethernet ring topologies are not supported: `ETH0` and `ETH1` must not be in same subnet range.
</pre></div>
</div>
</div>
</section>
<section id="siemens-function-block">
<h3>SIEMENS Function Block<a class="headerlink" href="#siemens-function-block" title="Link to this heading"></a></h3>
<p>The SIEMENS function block provided by ifm is intended to provide a interface between PLC and PLC application on VPU. There are four functions included in the function block</p>
<ul class="simple">
<li><p>Establishing a TCP connection to the PLC server of the VPU</p></li>
<li><p>Monitoring the connection to the PLC server</p></li>
<li><p>Receiving the ODS result data and displays at the outputs</p></li>
<li><p>Sending the zone sets to be activated</p></li>
</ul>
<p><img alt="fb_layout" src="../_images/FB_layout.jpg" /></p>
<p><strong>Activating a preset in the ODS</strong>
The presets are stored in the ODS and labelled with an identifier. When the user inputs the identifier of the preset at the PresetIdx input parameter the Function Block will</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- Sends the command to activate the specified zone set when the value of the PresetId input parameter is changed
- Sends the command to activate the specified zone set each time the connection to the PLC server of the VPU is established
- Repeats the command periodically if it was previously rejected by the PLC server 
- Shows in the ActivePresetSuccess output = TRUE if the command was accepted by the PLC server of the VPU
- Shows in the ActivePresetFailed output = TRUE if the command was rejected by the PLC server of the VPU or a communication error occurred during transmission
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A positive acknowledgement of the command does not mean that the zone set is already active in the ODS. The configuration used to determine the zone assignment is always displayed in the ODS.ZoneConfigID output.
</pre></div>
</div>
</div>
<p>For more details of Function Block implementation and configuration see the <a class="reference download internal" download="" href="../_downloads/e93785ef9f902146b8a89adcb5a9ba1f/ifm-OVP81x-ODS-V1-1_S7-1500_TCP_EN.pdf"><code class="xref download docutils literal notranslate"><span class="pre">Function</span> <span class="pre">Block</span> <span class="pre">PDF</span></code></a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          
<html>
<head>
 
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="footer, address, phone, icons" />
 
	<title>Footer With Address And Phones</title>
	
	
 
</head>
 
	<body>
		
		<footer class="footer-distributed">
 
		<div class="footer-left">
 
		<p class="footer-links">
		<a href="index.html">Home</a>
	·
		<a href="http://www.o3r.ifm" target="_blank">Learn more</a>
	·
		<a href="/latest/_static/privacy-policy.html" target="_blank">Privacy Policy</a>

		</p>
 
		<p class="footer-company-name">ifm robotics &copy; 2023</p>
		</div>
		
		<div class="footer-center">
 
		<div>
		<i class="fa fa-envelope"></i>
		<p><a href="mailto:support.efector.object-ident@ifm.com">support.efector.object-ident@ifm.com</a></p>
		</div>
 
		</div>
 
		<div class="footer-right">
 
		<div class="footer-icons">
 
		<a href="https://www.facebook.com/ifmefector" target="_blank"><i class="fa fa-facebook"></i></a>
		<a href="https://twitter.com/ifm_USA" target="_blank"><i class="fa fa-twitter"></i></a>
		<a href="https://www.linkedin.com/showcase/ifm-efector" target="_blank"><i class="fa fa-linkedin"></i></a>
		<a href="https://github.com/ifm" target="_blank"><i class="fa fa-github"></i></a>
 
		</div>
 
		</div>
 
		</footer>
 
	</body>
 
</html>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>