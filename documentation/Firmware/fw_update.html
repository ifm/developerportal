<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
    <meta property="article:modified_time" content="2023-04-05T09:37:53+00:00" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to update the firmware: &mdash; O3R  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/js/versionwarning.js"></script>
        <script src="../../_static/tabs.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Resources available for download" href="../../downloadable/index.html" />
    <link rel="prev" title="Migration guide: FW update process from FW version 0.16.23 to FW version 1.0.x" href="ReleaseNotes/FW_1.0.x/FW_1.0.x_migration_guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> O3R
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index_getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DeviceConfiguration/index.html">Device Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../o3r-utilities/README.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications_index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ifm3d/index.html">ifm3d API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ROS/index.html">ROS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Firmware</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ReleaseNotes/index.html">Release notes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to update</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#download-the-firmware">Download the firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#with-the-web-interface">With the web interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#with-ifmvisionassistant">With ifmVisionAssistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="#with-ifm3d">With ifm3d</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reboot-to-production-state-from-recovery-state">Reboot to production state from recovery state</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../downloadable/index.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ/FAQ.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">O3R</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">O3R firmware</a> &raquo;</li>
      <li>How to update the firmware:</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/documentation/Firmware/fw_update.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="tex2jax_ignore mathjax_ignore section" id="how-to-update-the-firmware">
<h1>How to update the firmware:<a class="headerlink" href="#how-to-update-the-firmware" title="Permalink to this headline"></a></h1>
<p><strong>The following guide is only valid for updating between 1.0.x and 1.0.y versions. For details about the update process between 0.16.23 to 1.0.x please see the <a class="reference internal" href="ReleaseNotes/FW_1.0.x/FW_1.0.x_migration_guide.html"><span class="doc std std-doc">migration guide</span></a></strong></p>
<div class="section" id="download-the-firmware">
<h2>Download the firmware<a class="headerlink" href="#download-the-firmware" title="Permalink to this headline"></a></h2>
<p>The firmware image is available on the <a class="reference external" href="https://www.ifm.com/">ifm.com</a> website. Navigate to the site and follow the steps below:</p>
<ul class="simple">
<li><p>Create an account (if you do not already have one) and log in.</p></li>
<li><p>Use the search bar to find OVP800 (VPU). This is also valid if you have pre-release sample units, e.g. M04239.</p></li>
<li><p>Navigate to the article page an click on the “Downloads” tab.</p></li>
<li><p>Select the firmware from the list. It will start downloading the file.</p></li>
</ul>
</div>
<div class="section" id="with-the-web-interface">
<h2>With the web interface<a class="headerlink" href="#with-the-web-interface" title="Permalink to this headline"></a></h2>
<ol class="simple">
<li><p>Open <a class="reference external" href="http://192.168.0.69:8080/">http://192.168.0.69:8080/</a> in web browser. The SWUpdate web interface is shown.</p></li>
<li><p>Drag and drop the <code class="docutils literal notranslate"><span class="pre">*.swu</span></code> firmware file into the <code class="docutils literal notranslate"><span class="pre">software</span> <span class="pre">update</span></code>-window. The upload procedure starts.</p></li>
</ol>
<p>For updating the firmware version from 0.16.xx to 1.0.xx, please follow the workflow in the <a class="reference internal" href="ReleaseNotes/FW_1.0.x/FW_1.0.x_migration_guide.html"><span class="doc std std-doc">migration guide</span></a></p>
<p>In firmware version 1.0.x, the system will be in the production state and the web interface will not be available to user. So the user has to reboot the system to recovery mode and then the user can access the web interface. To reboot the system to recovery mode follow the following steps.</p>
<ol class="simple">
<li><p>Open http://192.168.0.69/api/rpc/v1/com.ifm.efector/ in the web browser.</p></li>
<li><p>Enter <code class="docutils literal notranslate"><span class="pre">RebootToRecovery</span></code> as the method input. The device will reboot to recovery now.</p></li>
</ol>
<img align="center" height="300" src="resources/reboot2recovery.gif">
<ol class="simple">
<li><p>After a few seconds, the PORT LEDs will start flashing in a sequence indicating that the VPU is in recovery state.</p></li>
</ol>
<img width="400" height="200" src="resources/recovery_state.gif">
<ol class="simple">
<li><p>Open <a class="reference external" href="http://192.168.0.69:8080/">http://192.168.0.69:8080/</a> in the web browser to access the SWUpdater web interface.</p></li>
<li><p>Drag and drop the <code class="docutils literal notranslate"><span class="pre">*1_0_x.swu</span></code> firmware file into the <code class="docutils literal notranslate"><span class="pre">software</span> <span class="pre">update</span></code> window. The upload procedure starts.</p></li>
<li><p>After the firmware flashes to the VPU, the system restarts.</p></li>
<li><p>After a few minutes, the PORT LEDs will turn ON indicating that the firmware is flashed successfully.</p></li>
</ol>
<p><em>Please keep in mind that when rebooting to productive the WebInterface will not return, this is due to the fact there is no longer a SWUpdate process in the productive system.</em></p>
</div>
<div class="section" id="with-ifmvisionassistant">
<h2>With ifmVisionAssistant<a class="headerlink" href="#with-ifmvisionassistant" title="Permalink to this headline"></a></h2>
<p>Download the ifmVisionAssistant from <a class="reference external" href="https://www.ifm.com/us/en/product/OVP800?tab=documents">https://www.ifm.com/us/en/product/OVP800?tab=documents</a></p>
<p>Updating the firmware from 0.16.xx to 1.0.xx is currently not possible with the ifmVisionAssistant.</p>
<p>Updating the firmware from 1.0.xx to 1.0.xx via ifmVisionAssistant(v2.6.12) is currently supported on a Windows machine only. The Debian package of ifmVisionAssistant supporting Linux distributions will be released soon.</p>
<p>Expecting that user extracted the ZIP file and executing the following commands in the same directory</p>
<ol class="simple">
<li><p>Open the command prompt and run the ifmVisionAssistant executable</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>C:<span class="se">\U</span>sers<span class="se">\D</span>esktop<span class="se">\i</span>VA_2_6_12<span class="w"> </span>$<span class="w"> </span>ifmVisionAssistant.exe
</pre></div>
</div>
<p>To get the logs during firmware update, execute the above command with <code class="docutils literal notranslate"><span class="pre">-log</span></code> flag as shown below.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>C:<span class="se">\U</span>sers<span class="se">\D</span>esktop<span class="se">\i</span>VA_2_6_12<span class="w"> </span>$<span class="w"> </span>ifmVisionAssistant.exe<span class="w"> </span>-log
</pre></div>
</div>
<p>The log file is saved in i.e C:\Users\XYZ\AppData\Roaming\ifm electronic\ifmVisionAssistant\logs</p>
<ol class="simple">
<li><p>Connect to the VPU and navigate to the <code class="docutils literal notranslate"><span class="pre">VPU</span> <span class="pre">Settings</span></code> window and click <code class="docutils literal notranslate"><span class="pre">Update</span></code> under the <strong>Firmware update</strong> section. The version beside the <code class="docutils literal notranslate"><span class="pre">Update</span></code> button refers to the current version running on VPU.</p></li>
<li><p>Select the File and the update process will start.</p></li>
</ol>
</div>
<div class="section" id="with-ifm3d">
<h2>With ifm3d<a class="headerlink" href="#with-ifm3d" title="Permalink to this headline"></a></h2>
<p>In the instructions below, replace <code class="docutils literal notranslate"><span class="pre">firmware_image.swu</span></code> with the name of the firmware file you downloaded from <a class="reference external" href="https://www.ifm.com/">ifm.com</a>.
We assume you are running these commands from the folders in which the <code class="docutils literal notranslate"><span class="pre">.swu</span></code> file is located.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-Q0xJ" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-Q0xJ" name="Q0xJ" role="tab" tabindex="0">CLI</button><button aria-controls="panel-0-Yysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-Yysr" name="Yysr" role="tab" tabindex="-1">c++</button><button aria-controls="panel-0-cHl0aG9u" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-cHl0aG9u" name="cHl0aG9u" role="tab" tabindex="-1">python</button></div><div aria-labelledby="tab-0-Q0xJ" class="sphinx-tabs-panel group-tab" id="panel-0-Q0xJ" name="Q0xJ" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ifm3d<span class="w"> </span>reboot<span class="w"> </span>--recovery
%<span class="w"> </span><span class="nb">wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>system<span class="w"> </span>to<span class="w"> </span>reboot

$<span class="w"> </span>ifm3d<span class="w"> </span>swupdate<span class="w"> </span>&lt;<span class="w"> </span>firmware_image.swu
</pre></div>
</div>
</div><div aria-labelledby="tab-0-Yysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-Yysr" name="Yysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TODO</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-cHl0aG9u" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-cHl0aG9u" name="cHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ifm3dpy.device</span> <span class="kn">import</span> <span class="n">O3R</span><span class="p">()</span>
<span class="kn">from</span> <span class="nn">ifm3dpy.swupdater</span> <span class="kn">import</span> <span class="n">SWUpdater</span>

<span class="n">o3r</span> <span class="o">=</span> <span class="n">O3R</span><span class="p">()</span>

<span class="n">sw_updater</span><span class="o">.</span><span class="n">reboot_to_recovery</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">sw_updater</span><span class="o">.</span><span class="n">wait_for_recovery</span><span class="p">(</span><span class="mi">60000</span><span class="p">):</span> <span class="c1"># Wait for 1 min</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Device failed to boot into recovery&quot;</span><span class="p">)</span>
<span class="c1"># once the system has rebooted</span>
<span class="n">o3r</span><span class="o">.</span><span class="n">swupdate</span><span class="p">(</span><span class="n">firmware_image</span><span class="o">.</span><span class="n">swu</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="reboot-to-production-state-from-recovery-state">
<h2>Reboot to production state from recovery state<a class="headerlink" href="#reboot-to-production-state-from-recovery-state" title="Permalink to this headline"></a></h2>
<p>If the firmware update failed and VPU is stuck in a recovery state, the VPU has to be rebooted to the production state. Unfortunately at the current moment, this can only be achieved by executing the following code snippet.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Q0xJ" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-Q0xJ" name="Q0xJ" role="tab" tabindex="0">CLI</button><button aria-controls="panel-1-cHl0aG9u" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-cHl0aG9u" name="cHl0aG9u" role="tab" tabindex="-1">python</button></div><div aria-labelledby="tab-1-Q0xJ" class="sphinx-tabs-panel group-tab" id="panel-1-Q0xJ" name="Q0xJ" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ifm3d<span class="w"> </span>reboot<span class="w"> </span>--recovery
</pre></div>
</div>
</div><div aria-labelledby="tab-1-cHl0aG9u" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-cHl0aG9u" name="cHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ifm3dpy.device</span> <span class="kn">import</span> <span class="n">O3R</span>
<span class="kn">from</span> <span class="nn">ifm3dpy.swupdater</span> <span class="kn">import</span> <span class="n">SWUpdater</span>

<span class="n">o3r</span> <span class="o">=</span> <span class="n">O3R</span><span class="p">()</span>
<span class="n">sw_updater</span> <span class="o">=</span> <span class="n">SWUpdater</span><span class="p">(</span><span class="n">o3r</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">sw_updater</span><span class="o">.</span><span class="n">wait_for_productive</span><span class="p">(</span><span class="mi">2000</span><span class="p">):</span> <span class="c1"># Wait for 2 seconds</span>
    <span class="n">sw_updater</span><span class="o">.</span><span class="n">reboot_to_productive</span><span class="p">()</span>
</pre></div>
</div>
</div></div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ReleaseNotes/FW_1.0.x/FW_1.0.x_migration_guide.html" class="btn btn-neutral float-left" title="Migration guide: FW update process from FW version 0.16.23 to FW version 1.0.x" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../downloadable/index.html" class="btn btn-neutral float-right" title="Resources available for download" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, ifm CSR.
      <span class="lastupdated">Last updated on Apr 05, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>