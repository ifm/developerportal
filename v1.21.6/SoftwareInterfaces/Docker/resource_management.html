<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resource management &mdash; O3R  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=5800d392" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=d9f55abb"></script>
        <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Enabling GPU usage on the VPU" href="gpu.html" />
    <link rel="prev" title="Autostart a container on the VPU" href="autostart.html" />
    <!-- Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZZ08KXKV1G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZZ08KXKV1G');
    </script> -->
     

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            O3R
          </a>
              <div class="version">
                v1.21.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted/index_getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Firmware/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CompatibilityMatrix/compatibility_matrix.html">Compatibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Technology/index_technology.html">Technology</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index_software_interfaces.html">Software Interfaces</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../iVA/index_iVA.html">ifm Vision Assistant</a></li>
<li class="toctree-l2"><a class="reference external" href="https://api.ifm3d.com/stable/">ifm3d/ifm3dpy API</a></li>
<li class="toctree-l2"><a class="reference external" href="https://ros.ifm3d.com/latest/">ROS: ifm3d-ros</a></li>
<li class="toctree-l2"><a class="reference external" href="https://ros2.ifm3d.com/latest/">ROS2: ifm3d-ros2</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index_docker.html">Docker</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="embedded_resource_access.html">Guidelines for embedded software development and deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html">Getting started with Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployVPU.html">Deployment on board</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Docker logging configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="autostart.html">Autostarting the container</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Resource Management on the VPU</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#process-pinning">Process pinning</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-quotas">Docker quotas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gpu.html">Enabling GPU usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorRT/TensorRT_on_a_VPU_hardware.html">TensortRT: DL / ML model deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ifmDiagnostic/index_diagnostic.html">Diagnostic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Toolbox/index_toolbox.html">Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Examples/examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../CalibrationRoutines/index_calibrations.html">Calibration Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ODS/index_ods.html">ODS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PDS/index_pds.html">PDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PLC/index_plc.html">PLC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../downloadable/index.html">History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">O3R</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index_software_interfaces.html">Software Interfaces</a></li>
          <li class="breadcrumb-item"><a href="index_docker.html">Docker on O3R</a></li>
      <li class="breadcrumb-item active">Resource management</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/SoftwareInterfaces/Docker/resource_management.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="resource-management">
<h1>Resource management<a class="headerlink" href="#resource-management" title="Link to this heading"></a></h1>
<p>For resources and memory available on VPU, please refer to this <a class="reference internal" href="../../Technology/VPU/ResourceManagement/index_resource_management.html#resource-management"><span class="std std-ref">resource management</span></a></p>
<section id="process-pinning">
<h2>Process pinning<a class="headerlink" href="#process-pinning" title="Link to this heading"></a></h2>
<p>The O3R platform is design as a shared resource system, meaning that by default, process schedules are handled by the Linux multi-process scheduler so that they are distributed over all available CPU cores.
This is also the case for OEM application processes. In consequence they may be run on whatever CPU resource is best suited as decided by the scheduler.</p>
<p>ifm embedded applications (ODS, PDS, etc.) use the Denver cores as their primary CPU resource and may additionally run on ARM cores of the CPU.
In cases where an ifm application is running in addition to custom applications such as ROS nodes for examples, the user’s application code should be pinned to the ARM cores.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Denver cores are core 1, 2.
The ARM cores are 0, 3, 4, 5.</p>
</div>
<p>Pinning user code can be done using the <code class="docutils literal notranslate"><span class="pre">taskset</span></code> command. For example, to pin <code class="docutils literal notranslate"><span class="pre">ros_publisher_node.py</span></code> to ARM A57 cores, use:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>taskset<span class="w"> </span>-c<span class="w"> </span><span class="m">0</span>,3,4,5<span class="w">  </span>python3<span class="w"> </span>ros_publisher_node.py
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ethernet and CAN SocketCAN processes are usually scheduled on core 0 by the scheduler but are not pinned. They receive higher priority through user-space interrupts.
Therefore, if possible, avoid scheduling tasks on core 0 exclusively.</p>
</div>
</section>
<section id="docker-quotas">
<h2>Docker quotas<a class="headerlink" href="#docker-quotas" title="Link to this heading"></a></h2>
<p>The system does not specify Docker quotas.
If user processes deployed via Docker containers use high resource loads, the system might become unresponsive.</p>
<p>In the case of memory leaks or other issues, the Docker containers are <strong>not</strong> automatically stopped.
We recommend to implement safe guards, for example via Docker compose files:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.4&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis:${ARCH}-redis</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile.redis</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ARCH=${ARCH}</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>

<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;6666:6379&quot;</span>

<span class="w">    </span><span class="c1"># appendonly -&gt; not using AOF persistence</span>
<span class="w">    </span><span class="c1"># maxmemory -&gt; max memory used by redis</span>
<span class="w">    </span><span class="c1"># maxmemory-policy -&gt; policy to use when maxmemory is reached (allkeys-lru -&gt; Keeps most recently used keys; removes least recently used (LRU) keys)</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">[</span>
<span class="w">        </span><span class="s">&quot;redis-server&quot;</span><span class="p p-Indicator">,</span>
<span class="w">        </span><span class="s">&quot;--appendonly&quot;</span><span class="p p-Indicator">,</span>
<span class="w">        </span><span class="s">&quot;no&quot;</span><span class="p p-Indicator">,</span>
<span class="w">        </span><span class="s">&quot;--maxmemory&quot;</span><span class="p p-Indicator">,</span>
<span class="w">        </span><span class="s">&quot;1300mb&quot;</span><span class="p p-Indicator">,</span>
<span class="w">        </span><span class="s">&quot;--maxmemory-policy&quot;</span><span class="p p-Indicator">,</span>
<span class="w">        </span><span class="s">&quot;allkeys-lru&quot;</span><span class="p p-Indicator">,</span>
<span class="w">      </span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">logging</span><span class="p">:</span>
<span class="w">      </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">journald</span>
<span class="w">      </span><span class="nt">options</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{.ImageName}}&quot;</span>

<span class="w">    </span><span class="nt">cpuset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1,2</span>
<span class="w">    </span><span class="nt">mem_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1500000000</span>
<span class="w">    </span><span class="nt">memswap_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1500000000</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          
<html>
<head>
 
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="footer, address, phone, icons" />
 
	<title>Footer With Address And Phones</title>
	
	
 
</head>
 
	<body>
		
		<footer class="footer-distributed">
 
		<div class="footer-left">
 
		<p class="footer-links">
		<a href="index.html">Home</a>
	·
		<a href="http://www.o3r.ifm" target="_blank">Learn more</a>
	·
		<a href="/latest/_static/privacy-policy.html" target="_blank">Privacy Policy</a>

		</p>
 
		<p class="footer-company-name">ifm robotics &copy; 2023</p>
		</div>
		
		<div class="footer-center">
 
		<div>
		<i class="fa fa-envelope"></i>
		<p><a href="mailto:support.efector.object-ident@ifm.com">support.efector.object-ident@ifm.com</a></p>
		</div>
 
		</div>
 
		<div class="footer-right">
 
		<div class="footer-icons">
 
		<a href="https://www.facebook.com/ifmefector" target="_blank"><i class="fa fa-facebook"></i></a>
		<a href="https://twitter.com/ifm_USA" target="_blank"><i class="fa fa-twitter"></i></a>
		<a href="https://www.linkedin.com/showcase/ifm-efector" target="_blank"><i class="fa fa-linkedin"></i></a>
		<a href="https://github.com/ifm" target="_blank"><i class="fa fa-github"></i></a>
 
		</div>
 
		</div>
 
		</footer>
 
	</body>
 
</html>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>