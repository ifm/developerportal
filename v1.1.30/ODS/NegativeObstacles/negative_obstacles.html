<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Negative obstacles &mdash; O3R  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=87e54e7c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=28a392ea" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=d9f55abb"></script>
        <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Dust mitigation" href="../DustMitigation/dust_mitigation.html" />
    <link rel="prev" title="Overhanging loads" href="../OverhangingLoads/overhanging_loads.html" />
    <!-- Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZZ08KXKV1G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZZ08KXKV1G');
    </script> -->
     

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            O3R
          </a>
              <div class="version">
                v1.1.30
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../GettingStarted/index_getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Firmware/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CompatibilityMatrix/compatibility_matrix.html">Compatibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Technology/index_hardware_interfaces.html">Technology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_software_interfaces.html">Software Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CalibrationRoutines/index_calibrations.html">Calibration Routines</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index_ods.html">ODS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Mounting/mounting.html">Mounting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Instantiation/instantiation.html">Instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Configuration/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Zones/zones.html">Zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OccupancyGrid/occupancy_grid.html">Occupancy grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Recording/ods_data_recording.html">Recording</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ChangingViews/changing_views.html">Changing views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../OverhangingLoads/overhanging_loads.html">Overhanging loads</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Negative Obstacles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites-and-limitations">Prerequisites and limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enable-the-negative-obstacle-detection">Enable the negative obstacle detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#negative-obstacles-in-the-occupancy-grid">Negative obstacles in the occupancy grid</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../DustMitigation/dust_mitigation.html">Dust artifact mitigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ExtrinsicCalibration/index_extrinsic_calibration.html">Extrinsic calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Performance/index_performance.html">Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DeviceVerification/index_device_verification.html">Device verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iVA/index_ifmODS_iVA.html">ifmVisionAssistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Python/index_ifmODS_python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Cpp/index_ifmODS_cpp.html">C++</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../downloadable/index.html">History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">O3R</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index_ods.html">ODS (Obstacle Detection System)</a></li>
      <li class="breadcrumb-item active">Negative obstacles</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/ODS/NegativeObstacles/negative_obstacles.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="negative-obstacles">
<h1>Negative obstacles<a class="headerlink" href="#negative-obstacles" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature was added in firmware version 1.1.30.</p>
</div>
<p>ODS has the capability to detect negative obstacles, that is obstacles that are below the floor plane (holes, stairs, downward ramps, etc).</p>
<section id="prerequisites-and-limitations">
<h2>Prerequisites and limitations<a class="headerlink" href="#prerequisites-and-limitations" title="Link to this heading"></a></h2>
<p>To the ODS app, a negative obstacle is defined as:</p>
<ul class="simple">
<li><p>At least 20 centimeter large along the X axis,</p></li>
<li><p>At least 20 centimeter large along the Y axis,</p></li>
<li><p>If the bottom of the negative obstacle is detected, it must be at least 20 centimeters below the floor plane.</p></li>
</ul>
<p>Use cases considered for negative obstacles include:</p>
<ul class="simple">
<li><p>Stairs</p></li>
<li><p>Loading ramps</p></li>
<li><p>Missing ventilation tiles in dust-free clean rooms</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We are using here the “robot” coordinate system: the X axis is pointing in the robot main driving direction, the Z axis is pointing upwards. The floor plane is defined by <code class="docutils literal notranslate"><span class="pre">Z=0</span></code>.</p>
</div>
<p>Negative obstacles will not be detected equally well in all mounting positions. Due to the angle at which light is reflected from the ground, more or less range can be achieved for ground detection. Negative obstacle detection relies in part on being able to see pixels that belong to the ground, so in cases where range is limited, performance will be reduced. Also note that the visibility of pixels below ground is sacrificed by low camera mountings.
For more details on mounting recommendations, refer to the <a class="reference internal" href="../Mounting/mounting.html"><span class="std std-doc">mounting documentation</span></a>.</p>
<p>Due to the variability in true positive detections depending on the mounting position and the environment, we strongly encourage the user to perform tests in their facility. Take a look at our documentation about <a class="reference internal" href="../Performance/PerformanceVerification/ods_performance_verification.html"><span class="std std-doc">performance verification</span></a> and about the possible <a class="reference internal" href="../Performance/TOFArtifacts/ods_tof_artifacts.html"><span class="std std-doc">iToF artifacts</span></a> you can encounter.</p>
<p>Typically, negative obstacles are not detected as far as positive obstacles of a similar size. Consequently, we recommend that the user limits the robot travel speed to a known safe value in environments known to contain negative obstacles.</p>
</section>
<section id="enable-the-negative-obstacle-detection">
<h2>Enable the negative obstacle detection<a class="headerlink" href="#enable-the-negative-obstacle-detection" title="Link to this heading"></a></h2>
<p>Negative obstacle detection must be enabled for each individual port where floor is in the field of view. This feature is disabled by default.</p>
<p>The JSON below shows the <code class="docutils literal notranslate"><span class="pre">enableNegativeObstacles</span></code> parameter to consider to enable this feature for port0 (change the port number to fit your configuration):</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;applications&quot;</span><span class="p">:{</span>
<span class="w">        </span><span class="nt">&quot;instances&quot;</span><span class="p">:{</span>
<span class="w">            </span><span class="nt">&quot;port0&quot;</span><span class="p">:{</span>
<span class="w">                </span><span class="nt">&quot;negObst&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;enableNegativeObstacles&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The negative obstacle detection is a feature that <a class="reference internal" href="../../Technology/configuration.html#conf-only-parameters"><span class="std std-ref">requires a switch to “CONF” state</span></a> to be enabled, so it is not recommended to switch that function on and off dynamically but to use a static setting during robot operation.</p>
<p>In Python, for example, the feature can be enable with the code below. Note that this code assumes the existence of an <code class="docutils literal notranslate"><span class="pre">app0</span></code> instance using a camera connected to <code class="docutils literal notranslate"><span class="pre">port0</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Set the application to &quot;CONF&quot; state</span>
<span class="n">o3r</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;applications&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;app0&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;CONF&quot;</span><span class="p">}}}})</span>

<span class="c1"># 2. Enable the negative obstacle feature</span>
<span class="n">o3r</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;applications&quot;</span><span class="p">:{</span><span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;app0&quot;</span><span class="p">:{</span><span class="s2">&quot;port0&quot;</span><span class="p">:{</span><span class="s2">&quot;negObst&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;enableNegativeObstacles&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}}}}}})</span>

<span class="c1"># 3. Set the application instance back to RUN state</span>
<span class="n">o3r</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;applications&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;app0&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;RUN&quot;</span><span class="p">}}}})</span>
</pre></div>
</div>
</section>
<section id="negative-obstacles-in-the-occupancy-grid">
<h2>Negative obstacles in the occupancy grid<a class="headerlink" href="#negative-obstacles-in-the-occupancy-grid" title="Link to this heading"></a></h2>
<p>Negative obstacles will appear on the occupancy grid just like other obstacles do. Once the occupancy grid is constructed, there is no way to differentiate what obstacle is above or below the floor plane.</p>
<p>In the image below, we show the point cloud and occupancy grid corresponding to a staircase surrounded by a railing.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Point cloud and occupancy grid view</p></th>
<th class="head"><p>Corresponding RGB image</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="Occupancy grid is occupied where an negative obstacle is detected" src="../../_images/negative_obst_occ_grid.png" /></p></td>
<td><p><img alt="2D view of the staircase used as a test negative obstacle" src="../../_images/negative_obst_rgb.png" /></p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          
<html>
<head>
 
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="footer, address, phone, icons" />
 
	<title>Footer With Address And Phones</title>
	
	
 
</head>
 
	<body>
		
		<footer class="footer-distributed">
 
		<div class="footer-left">
 
		<p class="footer-links">
		<a href="index.html">Home</a>
	·
		<a href="http://www.o3r.ifm" target="_blank">Learn more</a>
	·
		<a href="../latest/_static/privacy-policy.html" target="_blank">Privacy Policy</a>

		</p>
 
		<p class="footer-company-name">ifm robotics &copy; 2023</p>
		</div>
		
		<div class="footer-center">
 
		<div>
		<i class="fa fa-envelope"></i>
		<p><a href="mailto:support.efector.object-ident@ifm.com">support.efector.object-ident@ifm.com</a></p>
		</div>
 
		</div>
 
		<div class="footer-right">
 
		<div class="footer-icons">
 
		<a href="https://www.facebook.com/ifmefector" target="_blank"><i class="fa fa-facebook"></i></a>
		<a href="https://twitter.com/ifm_USA" target="_blank"><i class="fa fa-twitter"></i></a>
		<a href="https://www.linkedin.com/showcase/ifm-efector" target="_blank"><i class="fa fa-linkedin"></i></a>
		<a href="https://github.com/ifm" target="_blank"><i class="fa fa-github"></i></a>
 
		</div>
 
		</div>
 
		</footer>
 
	</body>
 
</html>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>